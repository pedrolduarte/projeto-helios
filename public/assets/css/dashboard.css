/* ============ VARS ============ */
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif}
:root{
  --helios:#ff9800;
  --helios-dark:#e68900;
  --bg:#fffdf8;
  --text:#2b2b2b;
  --muted:#6b6b6b;
  --card:#fff;
  --shadow:0 3px 12px rgba(0,0,0,.12);
  --radius:14px;
}
body{
  background:linear-gradient(135deg,#fffefc,#fff5e1,#ffe0b2);
  color:var(--text);
  overflow-x:hidden;
}

/* ============ HEADER ============ */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 24px;
  background:rgba(255,255,255,.7);
  backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(0,0,0,.05);
  position:sticky;
  top:0;
  z-index:10;
}
.topbar h1{
  color:var(--helios);
  font-size:1.6rem;
  font-weight:800;
}
.logo-btn{
  background:transparent;
  border:none;
  cursor:pointer;
  width:46px;
  height:46px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform .3s;
}
.logo-btn img{width:36px;height:36px}
.logo-btn:hover{transform:rotate(360deg) scale(1.08)}

.user-box{position:relative}
.user-btn{
  background:#fff;
  color:var(--helios);
  border:2px solid var(--helios);
  border-radius:12px;
  padding:8px 12px;
  cursor:pointer;
  font-size:1.05rem;
}
.user-btn:hover{background:var(--helios);color:#fff}
.user-dropdown{
  position:absolute;
  right:0;
  top:115%;
  min-width:190px;
  background:#fff;
  box-shadow:var(--shadow);
  border-radius:12px;
  padding:8px;
  display:none;
  animation:fade .25s;
}
.user-dropdown.show{display:block}
.user-dropdown a{
  display:flex;
  gap:10px;
  align-items:center;
  color:#333;
  text-decoration:none;
  padding:10px 12px;
  border-radius:10px;
  font-weight:500;
}
.user-dropdown a:hover{background:#fff6e3;color:var(--helios)}

/* ============ SIDEBAR ============ */
.sidebar{
  position:fixed;
  top:0;
  left:0;
  width:260px;
  height:100%;
  background:linear-gradient(180deg,var(--helios),var(--helios-dark));
  color:#fff;
  transform:translateX(-100%);
  transition:transform .35s;
  padding:18px;
  z-index:20;
  box-shadow:8px 0 20px rgba(0,0,0,.2);
}
.sidebar.open{transform:translateX(0)}
.menu{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:20px;
}
.menu a{
  display:flex;
  gap:10px;
  align-items:center;
  padding:12px 14px;
  border-radius:12px;
  text-decoration:none;
  color:#fff;
  font-weight:700;
}
.menu a.active,
.menu a:hover{background:rgba(255,255,255,.28)}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  opacity:0;
  visibility:hidden;
  transition:opacity .25s;
  z-index:15;
}
.overlay.show{opacity:1;visibility:visible}

/* ============ CONTENT ============ */
.content{padding:24px;max-width:1200px;margin:0 auto}
.section{display:none;animation:fade .3s}
.section.active{display:block}
@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* ============ WELCOME ============ */
.welcome--row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  margin-bottom:14px;
}
.welcome h2{color:var(--helios);margin-bottom:4px}
.welcome p{color:var(--muted)}
.welcome-actions{display:flex;gap:10px}
.btn,.btn-outline{
  display:inline-flex;
  align-items:center;
  gap:8px;
  border:none;
  padding:10px 16px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}
.btn{background:var(--helios);color:#fff}
.btn:hover{filter:brightness(.95)}
.btn-outline{background:#fff;color:var(--helios);border:2px solid var(--helios)}
.btn-outline:hover{background:var(--helios);color:#fff}

/* ============ KPIs ============ */
.kpi-grid{
  display:grid;
  gap:16px;
  grid-template-columns:repeat(3,minmax(200px,1fr));
  margin-bottom:16px;
}
.kpi-card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
  display:flex;
  gap:14px;
  align-items:center;
  transition:transform .2s;
}
.kpi-card:hover{transform:translateY(-3px)}
.kpi-icon{
  width:54px;height:54px;border-radius:14px;
  background:#fff6e3;color:var(--helios);
  display:flex;align-items:center;justify-content:center;
  font-size:1.35rem;box-shadow:inset 0 0 0 2px rgba(255,152,0,.18);
}
.kpi-meta .kpi-label{font-weight:600;color:var(--muted)}
.kpi-meta .kpi-value{font-weight:800;font-size:1.4rem;line-height:1.2}
.kpi-meta .kpi-sub{color:var(--muted)}

/* ============ PANELS & CHARTS ============ */
.grid-2{display:grid;grid-template-columns:2fr 1fr;gap:16px}
.grid-1-1{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.panel{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
}
.panel-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}
.chip{
  background:var(--helios);
  color:#fff;border:none;padding:6px 12px;
  border-radius:999px;font-weight:700;cursor:pointer;
}
.chip--ghost{background:#fff;color:var(--helios);border:2px solid var(--helios)}
.chart-wrap{width:100%}
.chart-wrap--fill{height:420px}
.chart-wrap--medium{height:300px}
.chart-wrap canvas{width:100%!important;height:100%!important}
.donut-card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
  text-align:center;
}
.donut-card h4{margin-bottom:6px}
.chart-donut{height:200px}
.muted{color:var(--muted)}

/* ============ PROFILE ============ */
.section-head{margin-bottom:10px}
.profile-grid{display:grid;gap:20px;margin-top:12px;grid-template-columns:1fr 1fr}
.profile-view,.profile-edit{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
}
.info-card{
  display:flex;gap:12px;align-items:flex-start;
  background:#fffaf0;border:1px dashed rgba(255,152,0,.25);
  padding:12px;border-radius:12px;margin-bottom:12px;
}
.info-icon{color:var(--helios);font-size:1.3rem;margin-top:4px}
.field{margin-bottom:14px}
.field label{font-weight:700;color:#444;display:block;margin-bottom:6px}
.field .value{padding:10px 12px;border-radius:10px;background:#fff6e3}
.profile-edit input,
.simulador input,
.simulador select{
  width:100%;
  padding:10px 12px;
  border:1px solid #ddd;
  border-radius:10px;
}
.toast{
  position:fixed;right:20px;top:50%;transform:translateY(-50%);
  background:#22c55e;color:#fff;padding:12px 16px;border-radius:12px;
  box-shadow:var(--shadow);display:none;z-index:50;
  transition:all 0.3s ease;
  font-weight:600;
}
.toast.show{display:flex;gap:8px;align-items:center}

#consumoToast {
  background:#4caf50;
  animation:slideIn 0.3s ease;
}

@keyframes slideIn {
  from { transform:translateY(-50%) translateX(100%); opacity:0; }
  to { transform:translateY(-50%) translateX(0); opacity:1; }
}

/* Estado de loading para botões */
.btn:disabled {
  opacity:0.7;
  cursor:not-allowed;
  background:#ccc !important;
}

.btn:disabled:hover {
  transform:none !important;
}

/* ============ CONSUMO ============ */
.kpi-line{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:14px 0}
.mini-card{
  display:flex;gap:12px;align-items:center;
  background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;
}
.mini-icon{color:var(--helios);font-size:1.3rem}
.mini-label{color:var(--muted);font-weight:600}

/* NOVO: filtro e cadastro consumo */
.cadastro-consumo {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
  margin-bottom: 25px;
  padding: 25px;
}

.cadastro-consumo h3 {
  font-size: 1.2rem;
  color: #ff9800;
  font-weight: 600;
  margin-bottom: 20px;
}

.cc-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr auto;
  gap: 15px;
  align-items: end;
}

.field label {
  font-weight: 600;
  color: #333;
  display: block;
  margin-bottom: 6px;
}

.field select,
.field input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 8px;
  background: #fffaf3;
  font-size: 0.95rem;
  outline: none;
  transition: border 0.2s;
}

.field select:focus,
.field input:focus {
  border-color: #ff9800;
}

/* ============ SIMULAÇÃO ============ */
.sim-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
.simulador{
  background:var(--card);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:18px;
}
.preview-card{
  background:var(--card);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:18px;
}
.preview-head{display:flex;gap:12px;align-items:center;margin-bottom:10px}
.preview-icon{color:var(--helios);font-size:1.6rem}
.preview-body{display:grid;gap:10px}
.preview-item{
  display:flex;align-items:center;justify-content:space-between;
  background:#fffaf0;border:1px dashed rgba(255,152,0,.25);
  padding:10px;border-radius:10px;
}
.preview-item .label{color:var(--muted);font-weight:600}
.preview-item .value{font-weight:800}

/* ============ CHAT (se houver) ============ */
.chat-box{
  background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);
  margin-top:12px;overflow:hidden;
}
.messages{height:300px;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px}
.message{max-width:75%;padding:10px 14px;border-radius:12px}
.message.bot{background:#fff2d8;align-self:flex-start}
.message.user{background:var(--helios);color:#fff;align-self:flex-end}
.chat-input{display:flex;border-top:1px solid #eee}
.chat-input input{flex:1;border:none;padding:12px 14px;font-size:1rem}
.chat-input input:focus{outline:none}
.chat-input button{border:none;background:var(--helios);color:#fff;padding:0 16px}

/* ============ MODAL ============ */
.modal{
  position:fixed;inset:0;
  display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,.35);
  opacity:0;visibility:hidden;transition:opacity .25s;z-index:30;
}
.modal.show{opacity:1;visibility:visible}
.modal-card{
  background:var(--helios);color:#fff;padding:22px;border-radius:16px;
  box-shadow:var(--shadow);width:min(560px,90%);animation:slide .3s;
}
.modal-card h3{margin-bottom:8px}
@keyframes slide{
  from{transform:translateY(40px);opacity:0}
  to{transform:translateY(0);opacity:1}
}

/* ============ TABLE ============ */
.table{
  width:100%;margin-top:18px;border-collapse:collapse;background:#fff;
  box-shadow:var(--shadow);border-radius:12px;overflow:hidden;
}
.table th{background:var(--helios);color:#fff;text-align:left;padding:12px}
.table td{padding:12px;border-bottom:1px solid #eee}

/* ============ RESPONSIVE ============ */
@media (max-width:1100px){
  .kpi-grid{grid-template-columns:repeat(2,1fr)}
  .grid-2{grid-template-columns:1fr}
  .sim-grid{grid-template-columns:1fr}
  .cc-grid{grid-template-columns:1fr 1fr;gap:10px}
}
@media (max-width:900px){
  .profile-grid{grid-template-columns:1fr}
}
